<script src="out.js"></script>
<script src="pieces.js"></script>

<script>
	let game = Game('atomic')
	game.makeUciMove("e2e4")
	game.makeUciMove("d7d5")
	
	let fen = game.fen()
	
	let raw = fen.split(" ")[0]
	raw = raw.replace(/\//g, "")
	for(let i=1;i<=8;i++) raw = raw.replace(new RegExp(`${i}`, "g"), "........".substring(0,i))
	
	document.documentElement.style.position = "relative"
	
	let pieceSize = 40
	let squareSize = 50
	
	for(let file=0;file<8;file++) for(let rank=0;rank<8;rank++){
		let i = file + rank * 8
		let p = raw.substring(i, i+1)		
		if(p!="."){
			let img = document.createElement('img')
			img.onload = function(){
				document.documentElement.appendChild(img)
			}
			img.width = pieceSize
			img.src = PIECES_CSS["alpha"][p.toLowerCase() == p ? "b" : "w"][p.toLowerCase()]		
			img.style.position = "absolute"
			img.style.left = file * squareSize + "px"
			img.style.top = rank * squareSize + "px"
		}		
	}		
</script>
